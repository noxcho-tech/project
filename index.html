<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Mint Sudoku Extreme 9x9</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --mint: #10a37f;
      --radius-lg: 16px;
      --radius-pill: 999px;
      --transition-fast: 0.18s ease-out;

      /* Light theme */
      --bg: #f5faf9;
      --bg-elevated: #ffffff;
      --bg-subtle: #e9f5f1;
      --text: #0f172a;
      --text-soft: #6b7280;
      --border-subtle: rgba(15, 23, 42, 0.06);
      --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.06);
    }

    body.dark {
      /* Dark theme angelehnt an ChatGPT */
      --bg: #202123;
      --bg-elevated: #2b2c2f;
      --bg-subtle: #18191c;
      --text: #e5e7eb;
      --text-soft: #9ca3af;
      --border-subtle: rgba(148, 163, 184, 0.16);
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.65);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Inter", sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: stretch;
      padding: 24px;
      transition:
        background-color var(--transition-fast),
        color var(--transition-fast);
    }

    .shell {
      width: 100%;
      max-width: 1100px;
      background: linear-gradient(
        135deg,
        rgba(16, 163, 127, 0.12),
        rgba(16, 163, 127, 0)
      );
      border-radius: 28px;
      padding: 1px;
    }

    .frame {
      background: var(--bg);
      border-radius: 26px;
      padding: 20px 18px;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border-subtle);
      display: flex;
      flex-direction: column;
      gap: 18px;
      min-height: calc(100vh - 80px);
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-logo {
      width: 32px;
      height: 32px;
      border-radius: 12px;
      background: radial-gradient(circle at 0 0, #6ee7b7, var(--mint));
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: white;
      font-size: 16px;
      box-shadow: 0 10px 25px rgba(16, 163, 127, 0.45);
    }

    .brand-text-main {
      font-weight: 600;
      letter-spacing: 0.01em;
      font-size: 16px;
    }

    .brand-text-sub {
      font-size: 12px;
      color: var(--text-soft);
    }

    /* Dark mode toggle */
    .theme-toggle {
      border-radius: var(--radius-pill);
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: radial-gradient(circle at 0 0, rgba(16, 163, 127, 0.18), rgba(24, 24, 27, 0));
      padding: 4px 7px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      font-size: 13px;
      color: var(--text-soft);
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      transition:
        border-color var(--transition-fast),
        background-color var(--transition-fast),
        color var(--transition-fast),
        transform 0.12s ease-out;
    }

    .theme-toggle:hover {
      transform: translateY(-1px);
      border-color: rgba(16, 163, 127, 0.7);
    }

    .theme-toggle .pill {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      background: var(--bg-elevated);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 6px 20px rgba(15, 23, 42, 0.36);
      transition:
        background-color var(--transition-fast),
        transform var(--transition-fast);
    }

    .theme-toggle-icon {
      width: 13px;
      height: 13px;
    }

    body.dark .theme-toggle .pill {
      transform: translateX(8px);
      background: var(--mint);
    }

    body.dark .theme-toggle {
      color: #e5e7eb;
      border-color: rgba(148, 163, 184, 0.6);
    }

    main {
      flex: 1;
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1fr);
      gap: 18px;
      margin-top: 6px;
    }

    @media (max-width: 900px) {
      main {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .left {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .right {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .hero {
      background: radial-gradient(circle at top left, rgba(16, 163, 127, 0.16), transparent),
        var(--bg-elevated);
      border-radius: var(--radius-lg);
      padding: 18px 18px 14px;
      border: 1px solid var(--border-subtle);
    }

    .hero-label {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--mint);
      background: rgba(16, 163, 127, 0.08);
      border-radius: 999px;
      padding: 3px 9px;
      border: 1px dashed rgba(16, 163, 127, 0.4);
    }

    .hero-title {
      font-size: clamp(22px, 3vw, 28px);
      line-height: 1.15;
      margin-top: 12px;
      margin-bottom: 8px;
    }

    .hero-subtitle {
      font-size: 13px;
      color: var(--text-soft);
    }

    .hero-meta {
      margin-top: 12px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      font-size: 11px;
      color: var(--text-soft);
    }

    .hero-meta-pill {
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.3);
      background: var(--bg-subtle);
    }

    /* Sudoku Board */
    .board-wrapper {
      background: var(--bg-elevated);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-subtle);
      padding: 14px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .board-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      font-size: 12px;
      color: var(--text-soft);
    }

    .status-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 9px;
      border-radius: 999px;
      background: var(--bg-subtle);
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    .status-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: var(--mint);
      box-shadow: 0 0 0 5px rgba(16, 163, 127, 0.2);
    }

    .timer {
      font-variant-numeric: tabular-nums;
      font-weight: 500;
    }

    .board {
      display: grid;
      grid-template-columns: repeat(9, 1fr);
      gap: 0;
      border: 2px solid rgba(148, 163, 184, 0.6);
      border-radius: 14px;
      overflow: hidden;
      background: var(--bg-elevated);
    }

    .cell {
      width: 100%;
      padding-bottom: 100%; /* square */
      position: relative;
      border: 1px solid rgba(148, 163, 184, 0.25);
    }

    /* stärkere Linien für 3x3 Blöcke */
    .cell[data-bottom-block="true"] {
      border-bottom-width: 2px;
    }
    .cell[data-right-block="true"] {
      border-right-width: 2px;
    }

    .cell-input {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      border: none;
      background: transparent;
      text-align: center;
      font-size: calc(1.2vw + 12px);
      font-weight: 500;
      color: var(--text);
      outline: none;
      caret-color: var(--mint);
    }

    @media (max-width: 900px) {
      .cell-input {
        font-size: 20px;
      }
    }

    .cell-input:focus {
      background: rgba(16, 163, 127, 0.1);
    }

    .cell.fixed .cell-input {
      font-weight: 700;
      color: var(--mint);
      cursor: default;
    }

    .cell.invalid .cell-input {
      color: #ef4444;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 4px;
    }

    .btn {
      border-radius: var(--radius-pill);
      padding: 7px 12px;
      font-size: 12px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      background: var(--bg-subtle);
      color: var(--text);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition:
        background-color var(--transition-fast),
        border-color var(--transition-fast),
        transform 0.08s ease-out;
    }

    .btn-primary {
      background: linear-gradient(90deg, #6ee7b7, var(--mint));
      border-color: rgba(16, 163, 127, 0.85);
      color: #0f172a;
      font-weight: 600;
    }

    .btn:hover {
      transform: translateY(-1px);
      border-color: rgba(16, 163, 127, 0.85);
    }

    .status-message {
      font-size: 12px;
      color: var(--text-soft);
      min-height: 16px;
    }

    /* Leaderboard */
    .card {
      background: var(--bg-elevated);
      border-radius: var(--radius-lg);
      padding: 12px 13px;
      border: 1px solid var(--border-subtle);
      font-size: 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .card-title {
      font-size: 12px;
      font-weight: 600;
    }

    .leaderboard-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 11px;
    }

    .leaderboard-table th,
    .leaderboard-table td {
      padding: 4px 6px;
      text-align: left;
      border-bottom: 1px solid rgba(148, 163, 184, 0.25);
    }

    .leaderboard-table th {
      font-weight: 600;
      color: var(--text-soft);
    }

    .leaderboard-table tr:nth-child(1) td:first-child {
      font-weight: 700;
      color: var(--mint);
    }

    .badge-small {
      padding: 2px 6px;
      border-radius: 999px;
      font-size: 10px;
      border: 1px solid rgba(148, 163, 184, 0.25);
      background: var(--bg-subtle);
      color: var(--text-soft);
    }

    footer {
      font-size: 11px;
      color: var(--text-soft);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      border-top: 1px dashed rgba(148, 163, 184, 0.25);
      padding-top: 10px;
      margin-top: 4px;
      flex-wrap: wrap;
    }

    footer a {
      color: var(--mint);
      text-decoration: none;
      font-weight: 500;
      border-bottom: 1px solid transparent;
      padding-bottom: 1px;
    }

    footer a:hover {
      border-bottom-color: rgba(16, 163, 127, 0.5);
    }
  </style>
</head>
<body>
  <div class="shell">
    <div class="frame">
      <header>
        <div class="brand">
          <div class="brand-logo">S</div>
          <div>
            <div class="brand-text-main">Mint Sudoku Extreme</div>
            <div class="brand-text-sub">9×9 · single player · local leaderboard</div>
          </div>
        </div>

        <button class="theme-toggle" id="theme-toggle" aria-label="Dark Mode umschalten">
          <div class="pill">
            <svg class="theme-toggle-icon" viewBox="0 0 24 24" aria-hidden="true">
              <path
                d="M12 4.5a7.5 7.5 0 1 0 7.04 9.9A6.5 6.5 0 0 1 12 4.5z"
                fill="currentColor"
              />
            </svg>
          </div>
          <span id="theme-label">Dark</span>
        </button>
      </header>

      <main>
        <section class="left">
          <div class="hero">
            <div class="hero-label">
              <span>Extreme</span>
              <span>Sudoku 9×9</span>
            </div>
            <h1 class="hero-title">
              Konzentriere dich.<br />
              Ein minimalistisches Sudoku ohne Ablenkung.
            </h1>
            <p class="hero-subtitle">
              Jedes Spiel wird zufällig erzeugt. Kein Schnickschnack – nur du, ein 9×9-Grid
              und ein Timer. Löse es so schnell wie möglich, um deinen Namen in die
              Bestenliste zu bringen.
            </p>
            <div class="hero-meta">
              <span class="hero-meta-pill">Schwierigkeit: <strong>Extreme</strong></span>
              <span class="hero-meta-pill">Größe: <strong>9 × 9 × 1</strong></span>
              <span class="hero-meta-pill">Modus: <strong>Singleplayer</strong></span>
            </div>
          </div>

          <div class="board-wrapper">
            <div class="board-header">
              <div class="status-pill">
                <span class="status-dot"></span>
                <span id="status-text">Spiel läuft · viel Erfolg!</span>
              </div>
              <div class="timer">Zeit: <span id="timer">00:00</span></div>
            </div>

            <div class="board" id="board"></div>

            <div class="controls">
              <button class="btn btn-primary" id="btn-new">Neues Sudoku</button>
              <button class="btn" id="btn-check">Prüfen</button>
              <button class="btn" id="btn-solve">Aufgeben &amp; Lösung anzeigen</button>
              <span class="badge-small">Tipp: Nur Ziffern 1–9, keine Buchstaben.</span>
            </div>

            <div class="status-message" id="message"></div>
          </div>
        </section>

        <section class="right">
          <article class="card">
            <div class="card-title">Bestenliste (lokal)</div>
            <table class="leaderboard-table" id="leaderboard">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Name</th>
                  <th>Zeit</th>
                  <th>Datum</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="4">Noch keine Einträge – löse dein erstes Sudoku!</td>
                </tr>
              </tbody>
            </table>
          </article>

          <article class="card">
            <div class="card-title">Regeln (Kurzfassung)</div>
            <ul style="padding-left: 16px; color: var(--text-soft); font-size: 11px; display: flex; flex-direction: column; gap: 4px;">
              <li>Jede Zeile enthält die Zahlen 1–9 genau einmal.</li>
              <li>Jede Spalte enthält die Zahlen 1–9 genau einmal.</li>
              <li>Jeder 3×3-Block enthält die Zahlen 1–9 genau einmal.</li>
              <li>Fixe Zahlen (mint) können nicht verändert werden.</li>
              <li>Fehlerhafte Zellen werden rot markiert, wenn du auf „Prüfen“ klickst.</li>
            </ul>
          </article>
        </section>
      </main>

      <footer>
        <span>Layout im Mint-Stil mit ChatGPT-ähnlichem Dark Mode.</span>
        <span>Bestenliste wird nur in deinem Browser gespeichert.</span>
      </footer>
    </div>
  </div>

  <script>
    // ---------- Dark Mode ----------
    (function () {
      const body = document.body;
      const toggle = document.getElementById("theme-toggle");
      const label = document.getElementById("theme-label");

      const prefersDark = window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      const stored = window.localStorage.getItem("mint-sudoku-theme");

      if (stored === "dark" || (!stored && prefersDark)) {
        body.classList.add("dark");
      }

      function updateLabel() {
        const isDark = body.classList.contains("dark");
        label.textContent = isDark ? "Light" : "Dark";
      }

      updateLabel();

      toggle.addEventListener("click", () => {
        const isDark = body.classList.toggle("dark");
        window.localStorage.setItem("mint-sudoku-theme", isDark ? "dark" : "light");
        updateLabel();
      });
    })();

    // ---------- Sudoku Logik ----------
    const SIZE = 9;
    const EMPTY = 0;

    let solutionGrid = [];
    let fixedGrid = [];
    let timerInterval = null;
    let secondsElapsed = 0;
    let gameActive = false;

    const boardEl = document.getElementById("board");
    const messageEl = document.getElementById("message");
    const statusTextEl = document.getElementById("status-text");
    const timerEl = document.getElementById("timer");
    const leaderboardEl = document.getElementById("leaderboard").querySelector("tbody");

    function shuffle(array) {
      const arr = array.slice();
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function generateFullGrid() {
      const base = 3;
      const side = base * base;

      const pattern = (r, c) => (base * (r % base) + Math.floor(r / base) + c) % side;
      const rows = shuffle([0,1,2]).flatMap(g => shuffle([0,1,2]).map(r => g * base + r));
      const cols = shuffle([0,1,2]).flatMap(g => shuffle([0,1,2]).map(c => g * base + c));
      const nums = shuffle([1,2,3,4,5,6,7,8,9]);

      const grid = Array.from({ length: side }, () => Array(side).fill(0));
      for (let r = 0; r < side; r++) {
        for (let c = 0; c < side; c++) {
          grid[r][c] = nums[pattern(rows[r], cols[c])];
        }
      }
      return grid;
    }

    function createPuzzle(fullGrid, empties = 60) {
      const grid = fullGrid.map(row => row.slice());
      let cellsToRemove = Math.min(empties, SIZE * SIZE);

      const indices = shuffle(
        Array.from({ length: SIZE * SIZE }, (_, i) => i)
      );

      for (let i = 0; i < cellsToRemove; i++) {
        const idx = indices[i];
        const r = Math.floor(idx / SIZE);
        const c = idx % SIZE;
        grid[r][c] = EMPTY;
      }

      return grid;
    }

    function clearBoard() {
      boardEl.innerHTML = "";
    }

    function renderBoard(puzzleGrid) {
      clearBoard();
      fixedGrid = puzzleGrid.map(row => row.slice());

      for (let r = 0; r < SIZE; r++) {
        for (let c = 0; c < SIZE; c++) {
          const value = puzzleGrid[r][c];

          const cell = document.createElement("div");
          cell.className = "cell";
          const isBottomBlock = (r + 1) % 3 === 0 && r !== SIZE - 1;
          const isRightBlock = (c + 1) % 3 === 0 && c !== SIZE - 1;
          if (isBottomBlock) cell.dataset.bottomBlock = "true";
          if (isRightBlock) cell.dataset.rightBlock = "true";

          const input = document.createElement("input");
          input.type = "text";
          input.inputMode = "numeric";
          input.maxLength = 1;
          input.className = "cell-input";
          input.dataset.row = r;
          input.dataset.col = c;

          if (value !== EMPTY) {
            input.value = value;
            cell.classList.add("fixed");
            input.readOnly = true;
          }

          input.addEventListener("input", (e) => {
            const v = e.target.value.replace(/[^1-9]/g, "");
            e.target.value = v;
            cell.classList.remove("invalid");
            messageEl.textContent = "";
          });

          input.addEventListener("focus", () => {
            messageEl.textContent = "";
          });

          cell.appendChild(input);
          boardEl.appendChild(cell);
        }
      }
    }

    function startTimer() {
      stopTimer();
      secondsElapsed = 0;
      updateTimerDisplay();
      timerInterval = setInterval(() => {
        secondsElapsed++;
        updateTimerDisplay();
      }, 1000);
    }

    function stopTimer() {
      if (timerInterval) {
        clearInterval(timerInterval);
        timerInterval = null;
      }
    }

    function updateTimerDisplay() {
      const minutes = String(Math.floor(secondsElapsed / 60)).padStart(2, "0");
      const seconds = String(secondsElapsed % 60).padStart(2, "0");
      timerEl.textContent = `${minutes}:${seconds}`;
    }

    function readCurrentBoard() {
      const values = Array.from({ length: SIZE }, () => Array(SIZE).fill(EMPTY));
      const inputs = boardEl.querySelectorAll(".cell-input");
      inputs.forEach(input => {
        const r = parseInt(input.dataset.row, 10);
        const c = parseInt(input.dataset.col, 10);
        const v = input.value ? parseInt(input.value, 10) : EMPTY;
        if (!Number.isNaN(v)) {
          values[r][c] = v;
        }
      });
      return values;
    }

    function checkBoard(showErrors = true) {
      const current = readCurrentBoard();
      let hasError = false;
      let incomplete = false;

      const cells = boardEl.querySelectorAll(".cell");
      cells.forEach(cell => cell.classList.remove("invalid"));

      for (let r = 0; r < SIZE; r++) {
        for (let c = 0; c < SIZE; c++) {
          const val = current[r][c];
          if (val === EMPTY) {
            incomplete = true;
            continue;
          }
          if (val !== solutionGrid[r][c]) {
            hasError = true;
            if (showErrors) {
              const selector = `.cell-input[data-row="${r}"][data-col="${c}"]`;
              const input = boardEl.querySelector(selector);
              if (input) {
                input.parentElement.classList.add("invalid");
              }
            }
          }
        }
      }

      if (hasError) {
        messageEl.textContent = "Es gibt noch Fehler im Grid.";
        return false;
      }

      if (incomplete) {
        messageEl.textContent = "Sieht gut aus, aber das Sudoku ist noch nicht vollständig.";
        return false;
      }

      // korrekt und vollständig
      return true;
    }

    function showSolution() {
      const inputs = boardEl.querySelectorAll(".cell-input");
      inputs.forEach(input => {
        const r = parseInt(input.dataset.row, 10);
        const c = parseInt(input.dataset.col, 10);
        input.value = solutionGrid[r][c];
      });
    }

    // ---------- Leaderboard ----------
    function loadLeaderboard() {
      try {
        const raw = window.localStorage.getItem("mint-sudoku-leaderboard");
        if (!raw) return [];
        const parsed = JSON.parse(raw);
        if (!Array.isArray(parsed)) return [];
        return parsed;
      } catch {
        return [];
      }
    }

    function saveLeaderboard(entries) {
      window.localStorage.setItem("mint-sudoku-leaderboard", JSON.stringify(entries));
    }

    function formatTime(seconds) {
      const minutes = String(Math.floor(seconds / 60)).padStart(2, "0");
      const secs = String(seconds % 60).padStart(2, "0");
      return `${minutes}:${secs}`;
    }

    function renderLeaderboard() {
      const entries = loadLeaderboard();
      leaderboardEl.innerHTML = "";

      if (entries.length === 0) {
        const tr = document.createElement("tr");
        const td = document.createElement("td");
        td.colSpan = 4;
        td.textContent = "Noch keine Einträge – löse dein erstes Sudoku!";
        tr.appendChild(td);
        leaderboardEl.appendChild(tr);
        return;
      }

      entries
        .sort((a, b) => a.time - b.time)
        .slice(0, 10)
        .forEach((entry, index) => {
          const tr = document.createElement("tr");
          const rankTd = document.createElement("td");
          rankTd.textContent = index + 1;

          const nameTd = document.createElement("td");
          nameTd.textContent = entry.name || "Gast";

          const timeTd = document.createElement("td");
          timeTd.textContent = formatTime(entry.time);

          const dateTd = document.createElement("td");
          dateTd.textContent = entry.date || "";

          tr.appendChild(rankTd);
          tr.appendChild(nameTd);
          tr.appendChild(timeTd);
          tr.appendChild(dateTd);
          leaderboardEl.appendChild(tr);
        });
    }

    function addToLeaderboard(seconds) {
      const name = prompt("Glückwunsch! Trage deinen Namen für die Bestenliste ein:", "Gast") || "Gast";
      const entries = loadLeaderboard();
      const now = new Date();
      const dateStr = now.toLocaleDateString();

      entries.push({
        name,
        time: seconds,
        date: dateStr
      });

      saveLeaderboard(entries);
      renderLeaderboard();
    }

    // ---------- Game Setup ----------
    function newGame() {
      gameActive = true;
      messageEl.textContent = "";
      statusTextEl.textContent = "Spiel läuft · viel Erfolg!";
      boardEl.querySelectorAll(".cell").forEach(c => c.classList.remove("invalid"));

      solutionGrid = generateFullGrid();
      const puzzle = createPuzzle(solutionGrid, 60); // viele leere Felder = „extreme“
      renderBoard(puzzle);
      startTimer();
    }

    // Buttons
    document.getElementById("btn-new").addEventListener("click", () => {
      newGame();
    });

    document.getElementById("btn-check").addEventListener("click", () => {
      if (!gameActive) {
        messageEl.textContent = "Starte zuerst ein neues Spiel.";
        return;
      }

      const solved = checkBoard(true);
      if (solved) {
        gameActive = false;
        stopTimer();
        statusTextEl.textContent = "Gelöst! Trage dich in die Bestenliste ein.";
        messageEl.textContent = "Perfekt! Du hast das Sudoku korrekt gelöst.";
        addToLeaderboard(secondsElapsed);
      }
    });

    document.getElementById("btn-solve").addEventListener("click", () => {
      if (!gameActive) {
        showSolution();
        return;
      }
      const confirmGiveUp = confirm("Willst du wirklich aufgeben und die Lösung sehen?");
      if (!confirmGiveUp) return;
      gameActive = false;
      stopTimer();
      statusTextEl.textContent = "Lösung angezeigt · du kannst ein neues Spiel starten.";
      showSolution();
      messageEl.textContent = "Lösung eingeblendet. Versuch es beim nächsten Sudoku schneller!";
    });

    // Initial
    renderLeaderboard();
    newGame();
  </script>
</body>
</html>
